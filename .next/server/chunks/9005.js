"use strict";exports.id=9005,exports.ids=[9005],exports.modules={9005:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>ProjectDetailAdmin});var s=a(997),l=a(6689),i=a(6749),o=a(1163),d=a(2194),c=a(3468),r=a(2406),g=a(5379),u=a(3590);a(8819);var x=a(4650),p=a(1056),h=a(839),m=a(6308),f=e([d,r,g,u,p,h]);[d,r,g,u,p,h]=f.then?(await f)():f;let{convert:v}=a(816),{v4:j}=a(5828);function ProjectDetailAdmin(){let e=(0,i.useSession)(),t=(0,o.useRouter)(),a=(0,l.useRef)(null),n=new Date,[f,v]=(0,l.useState)([]),[b,N]=(0,l.useState)([]),[y,_]=(0,l.useState)([]),[T,S]=(0,l.useState)(""),[q,C]=(0,l.useState)(""),[I,w]=(0,l.useState)(""),[D,E]=(0,l.useState)(""),[P,R]=(0,l.useState)("/no-image.png"),[k,A]=(0,l.useState)(""),[O,$]=(0,l.useState)(""),[H,M]=(0,l.useState)(""),[V,z]=(0,l.useState)(""),[F,B]=(0,l.useState)(""),[G,U]=(0,l.useState)(""),[X,J]=(0,l.useState)(""),[K,L]=(0,l.useState)("");async function insertDataTinRao(e){let{data:a,error:n}=await x.O.from("projects").insert(e);n?console.log("Error:",n.message):((0,g.x9)("Đăng tin th\xe0nh c\xf4ng"),t.push("/cms/tin-da-dang",void 0,{shallow:!0}))}async function updatetDataTinRao(e){console.log(e.id);let{data:t,error:a}=await x.O.from("projects").update(e).eq("id",String(e.id));a?console.log("Error:",a.message):(console.log(t),(0,g.x9)("Sửa tin th\xe0nh c\xf4ng"))}async function uploadImage(e){console.log(e);let t=e.target.files;for(let a=0;a<t.length;a++){let t=!0;if(e.target.files[a].size>512e4&&((0,g._N)(`H\xecnh ${e.target.files[a].name} kh\xf4ng được qu\xe1 5 MB`),t=!1),["jpeg","png","jpg","gif"].includes(e.target.files[a].type.split("/").pop())||((0,g._N)(`H\xecnh ${e.target.files[a].name} kh\xf4ng đ\xfang định dạng, định dạng đ\xfang 'jpeg','png','jpg','gif' `),t=!1),t){let t=e.target.files[a];console.log(t);let{data:n,error:s}=await x.O.storage.from("project_image/avatar").upload(j(),t);n?(console.log(n),R(`https://vyjeeoqetducftdoemqr.supabase.co/storage/v1/object/public/project_image/avatar/${n.path}`)):console.log(s)}}}return(0,l.useEffect)(()=>{if(t.query.postId){let e={id:t.query.postId},a=`/api/projects/projectDetail?${d.default.stringify(e)}`;fetch(a).then(e=>e.json()).then(e=>{_(e),C(e.name_vn),w(e.diachi_vn),E(e.info_vn),R(e.img),A(e.tongquan_vn),$(e.vitri_vn),M(e.tienich_vn),z(e.matbang_vn),B(e.tiendo_vn),U(e.pttt_vn),J(e.active),L(e.deleted)})}},[t.query.postId]),(0,s.jsxs)(s.Fragment,{children:[e?(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),console.log(e.target.name),""==q||""==I)return(0,g._N)("Vui l\xf2ng điền t\xean dự \xe1n..."),!1;let a={id:null==t.query.postId?j():t.query.postId,name_vn:q,diachi_vn:I,info_vn:D,img:P,tongquan_vn:k,vitri_vn:O,tienich_vn:H,matbang_vn:V,tiendo_vn:F,pttt_vn:G,date_added:n,date_modified:n,active:X||"1",deleted:K||"0"};"0"!=t.query.postId?(console.log(a),delete a.date_added,updatetDataTinRao(a)):(console.log(a),delete a.date_modified,insertDataTinRao(a),t.push("/cms/tin-da-dang",void 0,{shallow:!0}))},encType:"multipart/form-data",children:[s.jsx(h.default,{}),s.jsx("div",{className:"grid grid-cols-12 gap-5",children:s.jsx("div",{className:"col-span-12",children:s.jsx("div",{className:"flex w-full flex-col",children:(0,s.jsxs)(r.Tabs,{"aria-label":"Options",children:[s.jsx(r.Tab,{title:"Th\xf4ng tin chung",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-5",children:[s.jsx("div",{className:"col-span-12",children:s.jsx(r.Input,{value:q,onChange:e=>C(e.target.value),type:"text",variant:"flat",label:"Name",name:"name",placeholder:"t\xean dự \xe1n...",labelPlacement:"outside"})}),s.jsx("div",{className:"col-span-12",children:s.jsx(r.Input,{value:I,onChange:e=>w(e.target.value),type:"text",variant:"flat",name:"address",label:"Address",placeholder:"địa chỉ dự \xe1n...",labelPlacement:"outside"})}),s.jsx("div",{className:"col-span-12",children:s.jsx(r.Input,{value:D,onChange:e=>E(e.target.value),type:"text",variant:"flat",name:"info",label:"Giới thiệu ngắn",placeholder:"giới thiệu...",labelPlacement:"outside"})}),(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-sm",children:"H\xecnh đại diện"}),(0,s.jsxs)("div",{className:"flex flex-wrap relative",children:[s.jsx(r.Image,{width:240,src:P,alt:"NextUI Album Cover",onClick:()=>{a.current&&a.current.click()},className:"w-40 h-40 m-5 text-large cursor-pointer"}),"/no-image.png"!=P?s.jsx("p",{className:"absolute bottom-6 left-6 z-10 cursor-pointer",onClick:()=>R("/no-image.png"),children:s.jsx(c.XCircleFill,{className:"text-2xl text-green-400 pointer-events-none"})}):""]}),s.jsx("input",{type:"file",name:"myImage",ref:a,onChange:e=>uploadImage(e),style:{display:"none"}})]})]})},"thong-tin-chung"),s.jsx(r.Tab,{title:"Tổng quan",children:s.jsx("div",{className:"grid grid-cols-12 gap-5",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Tổng quan"}),s.jsx(m.default,{value:k,onEditorChange:e=>A(e)})]})})},"tong-quan"),s.jsx(r.Tab,{title:"Vị tr\xed",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Vị tr\xed"}),s.jsx(m.default,{value:O,onEditorChange:e=>$(e)})]})},"vi-tri"),s.jsx(r.Tab,{title:"Tiện \xedch",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Tiện \xedch"}),s.jsx(m.default,{value:H,onEditorChange:e=>M(e)})]})},"tien-ich"),s.jsx(r.Tab,{title:"Mặt bằng",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Mặt bằng"}),s.jsx(m.default,{value:V,onEditorChange:e=>z(e)})]})},"mat-bang"),s.jsx(r.Tab,{title:"Tiến độ",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Tiến độ"}),s.jsx(m.default,{value:F,onEditorChange:e=>B(e)})]})},"tien-do"),s.jsx(r.Tab,{title:"PTTT",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Phương thức thanh to\xe1n"}),s.jsx(m.default,{value:G,onEditorChange:e=>U(e)})]})},"pttt")]})})})})]}):s.jsx(p.default,{}),s.jsx(u.ToastContainer,{})]})}n()}catch(e){n(e)}})}};