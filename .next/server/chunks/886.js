"use strict";exports.id=886,exports.ids=[886],exports.modules={886:(e,t,a)=>{a.a(e,async(e,l)=>{try{a.r(t),a.d(t,{default:()=>ProjectList});var n=a(997),i=a(6689),s=a(1163),d=a(2194),c=a(3468),o=a(2406),r=a(4650),h=a(5379),x=a(3590);a(8819);var p=a(661),j=a.n(p),m=a(754),u=a(314),f=e([d,o,h,x,m,u]);function ProjectList(){let e=(0,s.useRouter)(),t="projects",[a,l]=(0,i.useState)(!0),[p,f]=(0,i.useState)(!1),[g,b]=(0,i.useState)([]),[y,T]=(0,i.useState)("0");(0,i.useEffect)(()=>{let t={deleted:"/admin/[contentId]/deleted"==e.pathname?"1":"0"},a=`/api/admin/project_admin/project_total_list?${d.default.stringify(t)}`;fetch(a).then(e=>e.json()).then(e=>{T(e.length),console.log(e.length)})},[]),(0,i.useEffect)(()=>{l(!0);let t={deleted:"/admin/project/deleted"==e.asPath?"1":"0",page:null!=e.query.pa?e.query.pa:"1",limit:"10"},a=`/api/admin/project_admin/projectlist?${d.default.stringify(t)}`;fetch(a).then(e=>e.json()).then(e=>{b(e),console.log("project"),l(!1)})},[e.asPath,p]);let handleSwitch=async e=>{let a={id:e.id,active:"1"==e.active?"0":"1"},{data:l,error:n}=await r.O.from(t).update(a).eq("id",String(a.id));n?(console.log("Error:",n.message),(0,h._N)("Sửa tin thất bại")):(console.log(l),(0,h.x9)("Sửa tin th\xe0nh c\xf4ng"))},handleDeleted=e=>{let a={id:e.id,deleted:"1"};fetch("/api/admin/updateDataDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filterParams:{tableBase:t,obj:a}})}).then(e=>e.json()).then(e=>{e?(f(!p),(0,h.x9)("X\xf3a tin th\xe0nh c\xf4ng")):(0,h._N)("X\xf3a tin thất bại")})},handleRestore=async e=>{let a={id:e.id,deleted:"0"};fetch("/api/admin/updateDataDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filterParams:{tableBase:t,obj:a}})}).then(e=>e.json()).then(e=>{e?(f(!p),(0,h.x9)("Kh\xf4i phục tin th\xe0nh c\xf4ng")):(0,h._N)("Kh\xf4i phục tin thất bại")})};return a?n.jsx(u.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.Table,{"aria-label":"Example static collection table",children:[(0,n.jsxs)(o.TableHeader,{children:[n.jsx(o.TableColumn,{children:"NAME"}),n.jsx(o.TableColumn,{children:"Ng\xe0y đăng"}),n.jsx(o.TableColumn,{children:"Ẩn/Hiện"}),n.jsx(o.TableColumn,{children:"ACTION"})]}),n.jsx(o.TableBody,{children:g.map((t,a)=>(0,n.jsxs)(o.TableRow,{className:"",children:[n.jsx(o.TableCell,{children:n.jsx("span",{className:"line-clamp-1",children:t.name_vn})}),n.jsx(o.TableCell,{children:n.jsx(j(),{format:"DD/MM/YYYY",children:t.date_added})}),n.jsx(o.TableCell,{children:n.jsx(o.Switch,{defaultSelected:"1"==t.active,size:"sm",onChange:e=>handleSwitch(t)})}),n.jsx(o.TableCell,{children:(0,n.jsxs)("div",{className:"relative flex items-center gap-3",children:[n.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>window.open(`/du-an/${t.keyword}/${t.id}`,"_blank"),children:n.jsx(c.EyeFill,{size:23})}),n.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.push(`/admin/project/edit/${t.id}`,void 0,{shallow:!0}),children:n.jsx(c.PencilSquare,{size:23})}),"/admin/[contentId]/deleted"==e.pathname?n.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleRestore(t),children:n.jsx(c.ArrowClockwise,{size:23})}):n.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleDeleted(t),children:n.jsx(c.Trash3Fill,{size:23})})]})})]},a))})]}),n.jsx(m.default,{totalData:y}),n.jsx(x.ToastContainer,{})]})}[d,o,h,x,m,u]=f.then?(await f)():f,l()}catch(e){l(e)}})}};