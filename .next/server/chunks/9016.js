"use strict";exports.id=9016,exports.ids=[9016],exports.modules={9016:(e,t,a)=>{a.a(e,async(e,l)=>{try{a.r(t),a.d(t,{default:()=>NewstList});var s=a(997),i=a(6689),n=a(1163),d=a(2194),c=a(3468),r=a(2406),o=a(4650),h=a(5379),x=a(3590);a(8819);var p=a(661),m=a.n(p),u=a(754),g=a(314),j=e([d,r,h,x,u,g]);function NewstList(){let e=(0,n.useRouter)(),t="press",[a,l]=(0,i.useState)(!0),[p,j]=(0,i.useState)(!1),[f,b]=(0,i.useState)([]),[w,y]=(0,i.useState)("0");(0,i.useEffect)(()=>{let t={deleted:"/admin/[contentId]/deleted"==e.pathname?"1":"0"},a=`/api/admin/press_admin/press_total_list?${d.default.stringify(t)}`;fetch(a).then(e=>e.json()).then(e=>{y(e.length)})},[]),(0,i.useEffect)(()=>{l(!0);let t={deleted:"/admin/news/deleted"==e.asPath?"1":"0",page:null!=e.query.pa?e.query.pa:"1",limit:"10"},a=`/api/admin/press_admin/presslist?${d.default.stringify(t)}`;fetch(a).then(e=>e.json()).then(e=>{console.log(e),b(e),l(!1)})},[e.asPath,p]);let handleSwitch=async e=>{let a={id:e.id,active:"1"==e.active?"0":"1"},{data:l,error:s}=await o.O.from(t).update(a).eq("id",String(a.id));s?(console.log("Error:",s.message),(0,h._N)("Sửa tin thất bại")):(console.log(l),(0,h.x9)("Sửa tin th\xe0nh c\xf4ng"))},handleDeleted=async e=>{let a={id:e.id,deleted:"1"},{data:l,error:s}=await o.O.from(t).update(a).eq("id",String(a.id));s?(console.log("Error:",s.message),(0,h._N)("X\xf3a tin thất bại")):(console.log(l),j(!p),(0,h.x9)("X\xf3a tin th\xe0nh c\xf4ng"))},handleRestore=async e=>{let a={id:e.id,deleted:"0"},{data:l,error:s}=await o.O.from(t).update(a).eq("id",String(a.id));s?(console.log("Error:",s.message),(0,h._N)("Kh\xf4i phục tin thất bại")):(console.log(l),j(!p),(0,h.x9)("Kh\xf4i phục tin th\xe0nh c\xf4ng"))};return a?s.jsx(g.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.Table,{"aria-label":"Example static collection table",children:[(0,s.jsxs)(r.TableHeader,{children:[s.jsx(r.TableColumn,{children:"NAME"}),s.jsx(r.TableColumn,{children:"Ng\xe0y đăng"}),s.jsx(r.TableColumn,{children:"Ẩn/Hiện"}),s.jsx(r.TableColumn,{children:"ACTION"})]}),s.jsx(r.TableBody,{children:f.map((t,a)=>(0,s.jsxs)(r.TableRow,{className:"",children:[s.jsx(r.TableCell,{children:s.jsx("span",{className:"line-clamp-1",children:t.title})}),s.jsx(r.TableCell,{children:s.jsx(m(),{format:"DD/MM/YYYY",children:t.date_added})}),s.jsx(r.TableCell,{children:s.jsx(r.Switch,{defaultSelected:"1"==t.active,size:"sm",onChange:e=>handleSwitch(t)})}),s.jsx(r.TableCell,{children:(0,s.jsxs)("div",{className:"relative flex items-center gap-3",children:[s.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>window.open(`/tin-tuc/${t.keywords}/${t.id}`,"_blank"),children:s.jsx(c.EyeFill,{size:23})}),s.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.push(`/admin/news/edit/${t.id}`,void 0,{shallow:!0}),children:s.jsx(c.PencilSquare,{size:23})}),"/admin/[contentId]/deleted"==e.pathname?s.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleRestore(t),children:s.jsx(c.ArrowClockwise,{size:23})}):s.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleDeleted(t),children:s.jsx(c.Trash3Fill,{size:23})})]})})]},a))})]}),s.jsx(u.default,{totalData:w}),s.jsx(x.ToastContainer,{})]})}[d,r,h,x,u,g]=j.then?(await j)():j,l()}catch(e){l(e)}})}};