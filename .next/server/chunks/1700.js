"use strict";exports.id=1700,exports.ids=[1700],exports.modules={1700:(e,t,a)=>{a.a(e,async(e,l)=>{try{a.r(t),a.d(t,{default:()=>NewsDetailAdmin});var s=a(997),n=a(6689),i=a(6749),o=a(1163),r=a(2194),d=a(3468),c=a(2406),g=a(5379),u=a(3590);a(8819);var p=a(4650),x=a(1056),m=a(839),f=a(6308),h=e([r,c,g,u,x,m]);[r,c,g,u,x,m]=h.then?(await h)():h;let{convert:j}=a(816),{v4:v}=a(5828);function NewsDetailAdmin(){let e=(0,i.useSession)(),t=(0,o.useRouter)(),a=(0,n.useRef)(null),l=new Date,[h,j]=(0,n.useState)([]),[N,y]=(0,n.useState)([]),[b,w]=(0,n.useState)(""),[_,I]=(0,n.useState)(""),[q,S]=(0,n.useState)(""),[C,T]=(0,n.useState)("/no-image.png"),[k,D]=(0,n.useState)(""),[$,A]=(0,n.useState)(""),[F,H]=(0,n.useState)("");async function uploadImage(e){console.log(e);let t=e.target.files;for(let a=0;a<t.length;a++){let t=!0;if(e.target.files[a].size>512e4&&((0,g._N)(`H\xecnh ${e.target.files[a].name} kh\xf4ng được qu\xe1 5 MB`),t=!1),["jpeg","png","jpg","gif"].includes(e.target.files[a].type.split("/").pop())||((0,g._N)(`H\xecnh ${e.target.files[a].name} kh\xf4ng đ\xfang định dạng, định dạng đ\xfang 'jpeg','png','jpg','gif' `),t=!1),t){let t=e.target.files[a];console.log(t);let{data:l,error:s}=await p.O.storage.from("project_image/avatar").upload(v(),t);l?(console.log(l),T(`https://vyjeeoqetducftdoemqr.supabase.co/storage/v1/object/public/project_image/avatar/${l.path}`)):console.log(s)}}}return(0,n.useEffect)(()=>{if(t.query.postId){let e={id:t.query.postId},a=`/api/news/newsDetail?${r.default.stringify(e)}`;fetch(a).then(e=>e.json()).then(e=>{console.log(e),w(e.title),S(e.description),T(e.image_url),D(e.content),A(e.date_added),H(e.date_modified)})}},[t]),(0,s.jsxs)(s.Fragment,{children:[e?(0,s.jsxs)("form",{id:"myForm",onSubmit:e=>{if(e.preventDefault(),console.log(b),""==b)return(0,g._N)("Vui l\xf2ng điền t\xean dự \xe1n..."),!1;if(""==q)return(0,g._N)("Vui l\xf2ng điền giới thiệu..."),!1;let a={id:"0"==t.query.postId?v():t.query.postId,title:b,keywords:(0,g.N3)(b),category:"",description:q,link:"",image_url:C,content:k,active:"1",deleted:"0",creator:"",date_added:l,date_modified:l};"0"!=t.query.postId?(console.log(a),delete a.date_added,(0,g.wp)("press",a)):(console.log(a),delete a.date_modified,(0,g.kt)("press",a),t.push(`/admin/${t.query.contentId}`,void 0,{shallow:!0}))},encType:"multipart/form-data",children:[s.jsx(m.default,{}),s.jsx("div",{className:"grid grid-cols-12 gap-5",children:s.jsx("div",{className:"col-span-12",children:s.jsx("div",{className:"flex w-full flex-col",children:(0,s.jsxs)(c.Tabs,{"aria-label":"Options",children:[s.jsx(c.Tab,{title:"Th\xf4ng tin chung",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-5",children:[s.jsx("div",{className:"col-span-12",children:s.jsx(c.Input,{value:b,onChange:e=>w(e.target.value),type:"text",variant:"flat",label:"T\xean",name:"name",placeholder:"t\xean b\xe0i viết...",labelPlacement:"outside"})}),s.jsx("div",{className:"col-span-12",children:s.jsx(c.Textarea,{label:"Giới thiệu ngắn",placeholder:"Giới thiệu ngắn",value:q,labelPlacement:"outside",onChange:e=>S(e.target.value)})}),(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-sm",children:"H\xecnh đại diện"}),(0,s.jsxs)("div",{className:"flex flex-wrap relative",children:[s.jsx(c.Image,{width:240,src:C,alt:"NextUI Album Cover",onClick:()=>{a.current&&a.current.click()},className:"object-cover w-40 h-40 m-5 text-large cursor-pointer"}),"/no-image.png"!=C?s.jsx("p",{className:"absolute bottom-6 left-6 z-10 cursor-pointer",onClick:()=>T("/no-image.png"),children:s.jsx(d.XCircleFill,{className:"text-2xl text-green-400 pointer-events-none"})}):""]}),s.jsx("input",{type:"file",name:"myImage",ref:a,onChange:e=>uploadImage(e),style:{display:"none"}})]})]})},"thong-tin-chung"),s.jsx(c.Tab,{title:"Tổng quan",children:s.jsx("div",{className:"grid grid-cols-12 gap-5",children:(0,s.jsxs)("div",{className:"col-span-12",children:[s.jsx("p",{className:"font-bold text-base py-5",children:"Nội dung"}),s.jsx(f.default,{value:k,onEditorChange:e=>D(e)})]})})},"tong-quan")]})})})})]}):s.jsx(x.default,{}),s.jsx(u.ToastContainer,{})]})}l()}catch(e){l(e)}})}};