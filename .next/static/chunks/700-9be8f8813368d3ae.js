"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{20839:function(e,t,n){n.r(t),n.d(t,{default:function(){return HeaderAdmin}});var a=n(85893),i=n(67294),r=n(11163),o=n(36864);function HeaderAdmin(){let e=(0,r.useRouter)();new URLSearchParams(window.location.search);let[t,n]=(0,i.useState)("");return(0,i.useEffect)(()=>{"project"==e.query.contentId&&n("Dự \xe1n"),"/admin/project/edit/0"==e.asPath&&n("Th\xeam dự \xe1n"),"project"==e.query.contentId&&e.query.postId&&n("Chỉnh sửa dự \xe1n"),"news"==e.query.contentId&&n("Tin tức"),"/admin/news/edit/0"==e.asPath&&n("Th\xeam tin tức"),"news"==e.query.contentId&&e.query.postId&&n("Chỉnh sửa tin tức")},[e.query]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-8 mb-[20px] ",children:[(0,a.jsx)("div",{className:"col-span-6",children:(0,a.jsx)("p",{className:"font-bold text-2xl",children:t})}),(0,a.jsx)("div",{className:"col-span-6",children:e.query.postId?(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)(o.A,{color:"success",type:"submit",children:"Cập nhật"}),(0,a.jsx)(o.A,{color:"danger",onClick:()=>e.push("/admin/".concat(e.query.contentId),void 0,{shallow:!0}),children:"Quay lại"})]}):(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)(o.A,{color:"success",onClick:()=>e.push("/admin/".concat(e.query.contentId,"/edit/0"),void 0,{shallow:!0}),children:"Th\xeam"}),(0,a.jsx)(o.A,{color:"danger",onClick:()=>e.push("/admin/".concat(e.query.contentId,"/deleted"),void 0,{shallow:!0}),children:"X\xf3a"})]})})]})})}},76308:function(e,t,n){n.r(t),n.d(t,{default:function(){return EditorTiny}});var a=n(85893);n(67294);var i=n(44650),r=n(6235);let{v4:o}=n(67429);function EditorTiny(e){let uploadToSupabase=async e=>{console.log(e);try{let{data:t,error:n}=await i.O.storage.from("project_image").upload(o(),e);if(t)return console.log(t),"https://vyjeeoqetducftdoemqr.supabase.co/storage/v1/object/public/project_image/".concat(t.path);return console.error(n),null}catch(e){return console.error("Error uploading to Supabase:",e),null}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.M,{apiKey:"4u5329rm4xy88u4blzdf6fe3ue23yp4cwf76k6i5otutm4zb",value:e.value,onEditorChange:e.onEditorChange,init:{height:600,menubar:" insert format tools table help",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo| link code image | formatselect | bold italic backcolor |                                       alignleft aligncenter alignright alignjustify |                                       bullist numlist outdent indent | removeformat | help",image_title:!0,automatic_uploads:!0,file_picker_types:"image",images_upload_base_path:"https://api.cloudinary.com/v1_1/image/upload",images_upload_credentials:!0,images_upload_handler:(e,t,n)=>{var a=new FileReader;console.log(e),console.log(a),console.log(t);let i=new FormData;i.append("file",e.blob(),e.filename()),a.onload=()=>{uploadToSupabase(i).then(e=>{e?(console.log(e),t(e),console.log(t(e))):(console.log("error"),n("Error uploading image"))}).catch(e=>{console.error(e),n("Error uploading image")})},a.readAsDataURL(e.blob())}}})})}},51700:function(e,t,n){n.r(t),n.d(t,{default:function(){return NewsDetailAdmin}});var a=n(85893),i=n(67294),r=n(84053),o=n(11163),l=n(54887),s=n(98481),d=n(92720),c=n(29505),u=n(90606),p=n(70578),g=n(15704),h=n(15379),f=n(55678);n(27967);var m=n(44650),x=n(21056),b=n(20839),v=n(76308);let{convert:j}=n(11024),{v4:y}=n(67429);function NewsDetailAdmin(){let e=(0,r.useSession)(),t=(0,o.useRouter)(),n=(0,i.useRef)(null),j=new Date,[_,w]=(0,i.useState)([]),[k,N]=(0,i.useState)([]),[S,z]=(0,i.useState)(""),[C,R]=(0,i.useState)(""),[E,q]=(0,i.useState)(""),[L,I]=(0,i.useState)("/no-image.png"),[T,F]=(0,i.useState)(""),[H,A]=(0,i.useState)(""),[M,D]=(0,i.useState)("");async function uploadImage(e){console.log(e);let t=e.target.files;for(let n=0;n<t.length;n++){let t=!0;if(e.target.files[n].size>512e4&&((0,h._N)("H\xecnh ".concat(e.target.files[n].name," kh\xf4ng được qu\xe1 5 MB")),t=!1),["jpeg","png","jpg","gif"].includes(e.target.files[n].type.split("/").pop())||((0,h._N)("H\xecnh ".concat(e.target.files[n].name," kh\xf4ng đ\xfang định dạng, định dạng đ\xfang 'jpeg','png','jpg','gif' ")),t=!1),t){let t=e.target.files[n];console.log(t);let{data:a,error:i}=await m.O.storage.from("project_image/avatar").upload(y(),t);a?(console.log(a),I("https://vyjeeoqetducftdoemqr.supabase.co/storage/v1/object/public/project_image/avatar/".concat(a.path))):console.log(i)}}}return(0,i.useEffect)(()=>{if(t.query.postId){let e={id:t.query.postId},n="/api/news/newsDetail?".concat(l.Z.stringify(e));fetch(n).then(e=>e.json()).then(e=>{console.log(e),z(e.title),q(e.description),I(e.image_url),F(e.content),A(e.date_added),D(e.date_modified)})}},[t]),(0,a.jsxs)(a.Fragment,{children:[e?(0,a.jsxs)("form",{id:"myForm",onSubmit:e=>{if(e.preventDefault(),console.log(S),""==S)return(0,h._N)("Vui l\xf2ng điền t\xean dự \xe1n..."),!1;if(""==E)return(0,h._N)("Vui l\xf2ng điền giới thiệu..."),!1;let n={id:"0"==t.query.postId?y():t.query.postId,title:S,keywords:(0,h.N3)(S),category:"",description:E,link:"",image_url:L,content:T,active:"1",deleted:"0",creator:"",date_added:j,date_modified:j};"0"!=t.query.postId?(console.log(n),delete n.date_added,(0,h.wp)("press",n)):(console.log(n),delete n.date_modified,(0,h.kt)("press",n),t.push("/admin/".concat(t.query.contentId),void 0,{shallow:!0}))},encType:"multipart/form-data",children:[(0,a.jsx)(b.default,{}),(0,a.jsx)("div",{className:"grid grid-cols-12 gap-5",children:(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)("div",{className:"flex w-full flex-col",children:(0,a.jsxs)(d.n,{"aria-label":"Options",children:[(0,a.jsx)(c.r,{title:"Th\xf4ng tin chung",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-5",children:[(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)(u.Y,{value:S,onChange:e=>z(e.target.value),type:"text",variant:"flat",label:"T\xean",name:"name",placeholder:"t\xean b\xe0i viết...",labelPlacement:"outside"})}),(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)(p.Y,{label:"Giới thiệu ngắn",placeholder:"Giới thiệu ngắn",value:E,labelPlacement:"outside",onChange:e=>q(e.target.value)})}),(0,a.jsxs)("div",{className:"col-span-12",children:[(0,a.jsx)("p",{className:"font-bold text-sm",children:"H\xecnh đại diện"}),(0,a.jsxs)("div",{className:"flex flex-wrap relative",children:[(0,a.jsx)(g.J,{width:240,src:L,alt:"NextUI Album Cover",onClick:()=>{n.current&&n.current.click()},className:"object-cover w-40 h-40 m-5 text-large cursor-pointer"}),"/no-image.png"!=L?(0,a.jsx)("p",{className:"absolute bottom-6 left-6 z-10 cursor-pointer",onClick:()=>I("/no-image.png"),children:(0,a.jsx)(s.Z,{className:"text-2xl text-green-400 pointer-events-none"})}):""]}),(0,a.jsx)("input",{type:"file",name:"myImage",ref:n,onChange:e=>uploadImage(e),style:{display:"none"}})]})]})},"thong-tin-chung"),(0,a.jsx)(c.r,{title:"Tổng quan",children:(0,a.jsx)("div",{className:"grid grid-cols-12 gap-5",children:(0,a.jsxs)("div",{className:"col-span-12",children:[(0,a.jsx)("p",{className:"font-bold text-base py-5",children:"Nội dung"}),(0,a.jsx)(v.default,{value:T,onEditorChange:e=>F(e)})]})})},"tong-quan")]})})})})]}):(0,a.jsx)(x.default,{}),(0,a.jsx)(f.Ix,{})]})}},21056:function(e,t,n){n.r(t),n.d(t,{default:function(){return Login}});var a=n(85893);n(67294);var i=n(49258),r=n(48139),o=n(84053);function Login(){let e=(0,o.useSupabaseClient)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"container mx-auto md:w-[1170px] p-2 md:p-6 justify-center ",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-8",children:[(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)("p",{className:"text-3xl font-bold text-center",children:"Đăng nhập"})}),(0,a.jsx)("div",{className:"col-span-12 flex justify-center",children:(0,a.jsx)("div",{className:"w-[300px]",children:(0,a.jsx)(i.gx,{supabaseClient:e,providers:[],appearance:{theme:r.rD},theme:"light",localization:{variables:{sign_in:{email_label:"Email",password_label:"Mật khẩu",email_input_placeholder:"Địa chỉ email của bạn",password_input_placeholder:"Mật khẩu của bạn",button_label:"Đăng nhập",loading_button_label:"Đăng nhập..."},sign_up:{email_label:"Email",password_label:"Mật khẩu",email_input_placeholder:"Địa chỉ email của bạn",password_input_placeholder:"Mật khẩu của bạn",link_text:"Bạn chưa c\xf3 t\xe0i khoản? Đăng k\xfd",button_label:"Đăng k\xfd",loading_button_label:"Đăng k\xfd..."},magic_link:{link_text:"Đ\xe3 c\xf3 t\xe0i khoản? Đăng nhập"},forgotten_password:{email_label:"Email",password_label:"Mật khẩu",email_input_placeholder:"Địa chỉ email của bạn",button_label:"Đặt lại mật khẩu"}}}})})})]})})})}},70578:function(e,t,n){n.d(t,{Y:function(){return m}});var a=n(81153),i=n(82134),r=n(768);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o=n(67294),l=o.useLayoutEffect,useLatest=function(e){var t=o.useRef(e);return l(function(){t.current=e}),t},updateRef=function(e,t){if("function"==typeof e){e(t);return}e.current=t},use_composed_ref_esm=function(e,t){var n=(0,o.useRef)();return(0,o.useCallback)(function(a){e.current=a,n.current&&updateRef(n.current,null),n.current=t,t&&updateRef(t,a)},[t])},s={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles$1=function(e){Object.keys(s).forEach(function(t){e.style.setProperty(t,s[t],"important")})},d=null,getHeight=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},noop=function(){},c=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],u=!!document.documentElement.currentStyle,getSizingData$1=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=c.reduce(function(e,n){return e[n]=t[n],e},{}),a=n.boxSizing;if(""===a)return null;u&&"border-box"===a&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var i=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),r=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:i,borderSize:r}};function useListener(e,t,n){var a=useLatest(n);o.useLayoutEffect(function(){var handler=function(e){return a.current(e)};if(e)return e.addEventListener(t,handler),function(){return e.removeEventListener(t,handler)}},[])}var useWindowResizeListener=function(e){useListener(window,"resize",e)},useFontsLoadedListener=function(e){useListener(document.fonts,"loadingdone",e)},p=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],g=o.forwardRef(function(e,t){var n=e.cacheMeasurements,a=e.maxRows,i=e.minRows,r=e.onChange,l=void 0===r?noop:r,s=e.onHeightChange,c=void 0===s?noop:s,u=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,p),g=void 0!==u.value,h=o.useRef(null),f=use_composed_ref_esm(h,t),m=o.useRef(0),x=o.useRef(),resizeTextarea=function(){var e,t,r,o,l,s,u,p,g,f,b,v=h.current,j=n&&x.current?x.current:getSizingData$1(v);if(j){x.current=j;var y=(e=v.value||v.placeholder||"x",void 0===(t=i)&&(t=1),void 0===(r=a)&&(r=1/0),d||((d=document.createElement("textarea")).setAttribute("tabindex","-1"),d.setAttribute("aria-hidden","true"),forceHiddenStyles$1(d)),null===d.parentNode&&document.body.appendChild(d),o=j.paddingSize,l=j.borderSize,u=(s=j.sizingStyle).boxSizing,Object.keys(s).forEach(function(e){d.style[e]=s[e]}),forceHiddenStyles$1(d),d.value=e,p=getHeight(d,j),d.value=e,p=getHeight(d,j),d.value="x",f=(g=d.scrollHeight-o)*t,"border-box"===u&&(f=f+o+l),p=Math.max(f,p),b=g*r,"border-box"===u&&(b=b+o+l),[p=Math.min(b,p),g]),_=y[0],w=y[1];m.current!==_&&(m.current=_,v.style.setProperty("height",_+"px","important"),c(_,{rowHeight:w}))}};return o.useLayoutEffect(resizeTextarea),useWindowResizeListener(resizeTextarea),useFontsLoadedListener(resizeTextarea),o.createElement("textarea",_extends({},u,{onChange:function(e){g||resizeTextarea(),l(e)},ref:f}))}),h=n(85893),f=(0,i.Gp)(({style:e,minRows:t=3,maxRows:n=8,cacheMeasurements:i=!1,onHeightChange:o,...l},s)=>{let{Component:d,label:c,description:u,shouldLabelBeOutside:p,shouldLabelBeInside:f,errorMessage:m,getBaseProps:x,getLabelProps:b,getInputProps:v,getInputWrapperProps:j,getHelperWrapperProps:y,getDescriptionProps:_,getErrorMessageProps:w}=(0,a.G)({...l,ref:s,isMultiline:!0}),k=(0,h.jsx)("label",{...b(),children:c}),N=v();return(0,h.jsxs)(d,{...x(),children:[p?k:null,(0,h.jsxs)("div",{...j(),children:[f?k:null,(0,h.jsx)(g,{...N,cacheMeasurements:i,maxRows:n,minRows:t,style:(0,r.dG)(N.style,null!=e?e:{}),onHeightChange:o})]}),(0,h.jsx)("div",{...y(),children:m?(0,h.jsx)("div",{...w(),children:m}):u?(0,h.jsx)("div",{..._(),children:u}):null})]})});f.displayName="NextUI.Textarea";var m=f}}]);