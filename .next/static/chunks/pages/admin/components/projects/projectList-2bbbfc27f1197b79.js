(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{18891:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/components/projects/projectList",function(){return n(886)}])},886:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ProjectList}});var a=n(85893),i=n(67294),s=n(11163),c=n(54887),l=n(19982),d=n(28486),o=n(51860),r=n(60646),h=n(56597),p=n(18754),x=n(25632),j=n(73906),u=n(26789),f=n(41652),m=n(50121),g=n(44650),_=n(15379),N=n(55678);n(27967);var y=n(94803),b=n.n(y),S=n(754),v=n(70314);function ProjectList(){let e=(0,s.useRouter)(),t="projects",[n,y]=(0,i.useState)(!0),[w,k]=(0,i.useState)(!1),[C,E]=(0,i.useState)([]),[P,D]=(0,i.useState)("0");(0,i.useEffect)(()=>{let t={deleted:"/admin/[contentId]/deleted"==e.pathname?"1":"0"},n="".concat("/api/admin/project_admin/project_total_list","?").concat(c.Z.stringify(t));fetch(n).then(e=>e.json()).then(e=>{D(e.length),console.log(e.length)})},[]),(0,i.useEffect)(()=>{y(!0);let t={deleted:"/admin/project/deleted"==e.asPath?"1":"0",page:null!=e.query.pa?e.query.pa:"1",limit:"10"},n="".concat("/api/admin/project_admin/projectlist","?").concat(c.Z.stringify(t));fetch(n).then(e=>e.json()).then(e=>{E(e),console.log("project"),y(!1)})},[e.asPath,w]);let handleSwitch=async e=>{let n={id:e.id,active:"1"==e.active?"0":"1"},{data:a,error:i}=await g.O.from(t).update(n).eq("id",String(n.id));i?(console.log("Error:",i.message),(0,_._N)("Sửa tin thất bại")):(console.log(a),(0,_.x9)("Sửa tin th\xe0nh c\xf4ng"))},handleDeleted=e=>{let n={id:e.id,deleted:"1"};fetch("/api/admin/updateDataDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filterParams:{tableBase:t,obj:n}})}).then(e=>e.json()).then(e=>{e?(k(!w),(0,_.x9)("X\xf3a tin th\xe0nh c\xf4ng")):(0,_._N)("X\xf3a tin thất bại")})},handleRestore=async e=>{let n={id:e.id,deleted:"0"};fetch("/api/admin/updateDataDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filterParams:{tableBase:t,obj:n}})}).then(e=>e.json()).then(e=>{e?(k(!w),(0,_.x9)("Kh\xf4i phục tin th\xe0nh c\xf4ng")):(0,_._N)("Kh\xf4i phục tin thất bại")})};return n?(0,a.jsx)(v.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.b,{"aria-label":"Example static collection table",children:[(0,a.jsxs)(p.J,{children:[(0,a.jsx)(x.j,{children:"NAME"}),(0,a.jsx)(x.j,{children:"Ng\xe0y đăng"}),(0,a.jsx)(x.j,{children:"Ẩn/Hiện"}),(0,a.jsx)(x.j,{children:"ACTION"})]}),(0,a.jsx)(j.y,{children:C.map((t,n)=>(0,a.jsxs)(u.g,{className:"",children:[(0,a.jsx)(f.X,{children:(0,a.jsx)("span",{className:"line-clamp-1",children:t.name_vn})}),(0,a.jsx)(f.X,{children:(0,a.jsx)(b(),{format:"DD/MM/YYYY",children:t.date_added})}),(0,a.jsx)(f.X,{children:(0,a.jsx)(m.i,{defaultSelected:"1"==t.active,size:"sm",onChange:e=>handleSwitch(t)})}),(0,a.jsx)(f.X,{children:(0,a.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>window.open("/du-an/".concat(t.keyword,"/").concat(t.id),"_blank"),children:(0,a.jsx)(l.Z,{size:23})}),(0,a.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.push("/admin/project/edit/".concat(t.id),void 0,{shallow:!0}),children:(0,a.jsx)(d.Z,{size:23})}),"/admin/[contentId]/deleted"==e.pathname?(0,a.jsx)("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleRestore(t),children:(0,a.jsx)(o.Z,{size:23})}):(0,a.jsx)("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleDeleted(t),children:(0,a.jsx)(r.Z,{size:23})})]})})]},n))})]}),(0,a.jsx)(S.default,{totalData:P}),(0,a.jsx)(N.Ix,{})]})}}},function(e){e.O(0,[885,146,971,864,459,961,758,982,536,774,888,179],function(){return e(e.s=18891)}),_N_E=e.O()}]);