(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{60926:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/components/news/newsList",function(){return n(29016)}])},29016:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return NewstList}});var s=n(85893),i=n(67294),a=n(11163),c=n(54887),l=n(19982),d=n(28486),o=n(51860),r=n(60646),h=n(56597),x=n(18754),p=n(25632),u=n(73906),f=n(26789),j=n(41652),m=n(50121),g=n(44650),w=n(15379),_=n(55678);n(27967);var N=n(94803),y=n.n(N),v=n(754),E=n(70314);function NewstList(){let e=(0,a.useRouter)(),t="press",[n,N]=(0,i.useState)(!0),[S,k]=(0,i.useState)(!1),[b,C]=(0,i.useState)([]),[X,Z]=(0,i.useState)("0");(0,i.useEffect)(()=>{let t={deleted:"/admin/[contentId]/deleted"==e.pathname?"1":"0"},n="".concat("/api/admin/press_admin/press_total_list","?").concat(c.Z.stringify(t));fetch(n).then(e=>e.json()).then(e=>{Z(e.length)})},[]),(0,i.useEffect)(()=>{N(!0);let t={deleted:"/admin/news/deleted"==e.asPath?"1":"0",page:null!=e.query.pa?e.query.pa:"1",limit:"10"},n="".concat("/api/admin/press_admin/presslist","?").concat(c.Z.stringify(t));fetch(n).then(e=>e.json()).then(e=>{console.log(e),C(e),N(!1)})},[e.asPath,S]);let handleSwitch=async e=>{let n={id:e.id,active:"1"==e.active?"0":"1"},{data:s,error:i}=await g.O.from(t).update(n).eq("id",String(n.id));i?(console.log("Error:",i.message),(0,w._N)("Sửa tin thất bại")):(console.log(s),(0,w.x9)("Sửa tin th\xe0nh c\xf4ng"))},handleDeleted=async e=>{let n={id:e.id,deleted:"1"},{data:s,error:i}=await g.O.from(t).update(n).eq("id",String(n.id));i?(console.log("Error:",i.message),(0,w._N)("X\xf3a tin thất bại")):(console.log(s),k(!S),(0,w.x9)("X\xf3a tin th\xe0nh c\xf4ng"))},handleRestore=async e=>{let n={id:e.id,deleted:"0"},{data:s,error:i}=await g.O.from(t).update(n).eq("id",String(n.id));i?(console.log("Error:",i.message),(0,w._N)("Kh\xf4i phục tin thất bại")):(console.log(s),k(!S),(0,w.x9)("Kh\xf4i phục tin th\xe0nh c\xf4ng"))};return n?(0,s.jsx)(E.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h.b,{"aria-label":"Example static collection table",children:[(0,s.jsxs)(x.J,{children:[(0,s.jsx)(p.j,{children:"NAME"}),(0,s.jsx)(p.j,{children:"Ng\xe0y đăng"}),(0,s.jsx)(p.j,{children:"Ẩn/Hiện"}),(0,s.jsx)(p.j,{children:"ACTION"})]}),(0,s.jsx)(u.y,{children:b.map((t,n)=>(0,s.jsxs)(f.g,{className:"",children:[(0,s.jsx)(j.X,{children:(0,s.jsx)("span",{className:"line-clamp-1",children:t.title})}),(0,s.jsx)(j.X,{children:(0,s.jsx)(y(),{format:"DD/MM/YYYY",children:t.date_added})}),(0,s.jsx)(j.X,{children:(0,s.jsx)(m.i,{defaultSelected:"1"==t.active,size:"sm",onChange:e=>handleSwitch(t)})}),(0,s.jsx)(j.X,{children:(0,s.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>window.open("/tin-tuc/".concat(t.keywords,"/").concat(t.id),"_blank"),children:(0,s.jsx)(l.Z,{size:23})}),(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.push("/admin/news/edit/".concat(t.id),void 0,{shallow:!0}),children:(0,s.jsx)(d.Z,{size:23})}),"/admin/[contentId]/deleted"==e.pathname?(0,s.jsx)("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleRestore(t),children:(0,s.jsx)(o.Z,{size:23})}):(0,s.jsx)("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleDeleted(t),children:(0,s.jsx)(r.Z,{size:23})})]})})]},n))})]}),(0,s.jsx)(v.default,{totalData:X}),(0,s.jsx)(_.Ix,{})]})}}},function(e){e.O(0,[885,146,971,864,459,961,758,982,536,774,888,179],function(){return e(e.s=60926)}),_N_E=e.O()}]);