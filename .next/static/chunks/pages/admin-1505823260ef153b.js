(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{64830:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n(66767)}])},82528:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Layout}});var s=n(85893);n(67294);var a=n(44086);function Layout(e){let{children:t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"container mx-auto md:w-[1170px] p-2 md:p-6 ",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-8",children:[(0,s.jsx)("div",{className:"col-span-4",children:(0,s.jsx)(a.default,{})}),(0,s.jsx)("div",{className:"col-span-8",children:t})]})})})}},44086:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return MenuSidebar}});var s=n(85893),a=n(67294),i=n(11163),c=n(44650),l=n(84053),r=n(42963),d=n(3125),o=n(36991),u=n(53694),h=n(18266),x=n(25038),j=n(87950),p=n(66081),f=n(47041),m=n(54887);function MenuSidebar(){let e=(0,i.useRouter)(),t=(0,l.useSession)(),[n,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),handleLogout=()=>{(0,f.deleteCookie)("sb-vyjeeoqetducftdoemqr-auth-token"),c.O.auth.signOut()};return(0,a.useEffect)(()=>{if(t){let e={id:t.user.id},n="/api/admin/user/profileDetail?".concat(m.Z.stringify(e));fetch(n).then(e=>e.json()).then(e=>{g(e.full_name),y(e.email)})}},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.d,{selectionMode:"multiple",variant:"bordered",defaultExpandedKeys:["1","2","3"],showDivider:!1,isCompact:!0,children:[(0,s.jsx)(d.G,{"aria-label":n,startContent:(0,s.jsx)(o.h,{isBordered:!0,color:"primary",radius:"lg",src:"https://i.pravatar.cc/150?u=a042581f4e29026024d"}),subtitle:v,title:n,children:(0,s.jsxs)(u.X,{"aria-label":"Actions",children:[(0,s.jsx)(h.R,{endContent:(0,s.jsx)(x.Z,{size:13}),startContent:(0,s.jsx)(j.Z,{size:20}),onClick:()=>e.push("/admin/project",void 0,{shallow:!0}),showDivider:!0,children:(0,s.jsx)("span",{className:"text-base",children:"Thiết lập t\xe0i khoản"})},"new"),(0,s.jsx)(h.R,{endContent:(0,s.jsx)(x.Z,{size:13}),startContent:(0,s.jsx)(p.Z,{size:20}),onClick:()=>handleLogout(),showDivider:!0,children:(0,s.jsx)("span",{className:"text-base",children:"Đăng xuất"})},"new")]})},"1"),(0,s.jsx)(d.G,{"aria-label":"Quản l\xfd",title:(0,s.jsx)("span",{className:"font-bold text-base uppercase",children:"Quản l\xfd"}),children:(0,s.jsxs)(u.X,{"aria-label":"Actions",children:[(0,s.jsx)(h.R,{endContent:(0,s.jsx)(x.Z,{size:13}),startContent:(0,s.jsx)(j.Z,{size:20}),onClick:()=>e.push("/admin/project",void 0,{shallow:!0}),showDivider:!0,children:(0,s.jsx)("span",{className:"text-base",children:"Dự \xe1n"})},"du-an"),(0,s.jsx)(h.R,{endContent:(0,s.jsx)(x.Z,{size:13}),startContent:(0,s.jsx)(p.Z,{size:20}),onClick:()=>e.push("/admin/news",void 0,{shallow:!0}),children:(0,s.jsx)("span",{className:"text-base",children:"Tin tức"})},"tin-tuc")]})},"2")]})})}},88799:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ProjectDetail}});var s=n(85893),a=n(67294),i=n(84053),c=n(11163),l=n(54887),r=n(55678);n(27967);var d=n(21056),o=n(49005),u=n(51700),h=n(82528);let{convert:x}=n(11024),{v4:j}=n(67429);function ProjectDetail(){let e=(0,i.useSession)(),t=(0,c.useRouter)(),n="project"===t.query.contentId,x="news"===t.query.contentId;return(0,a.useEffect)(()=>{if(t.query.postId){let e={id:t.query.postId},n="/api/projects/projectDetail?".concat(l.Z.stringify(e));fetch(n).then(e=>e.json()).then(e=>{})}},[t.query.postId]),(0,s.jsxs)(s.Fragment,{children:[e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(h.default,{children:[n&&(0,s.jsx)(o.default,{}),x&&(0,s.jsx)(u.default,{})]})}):(0,s.jsx)(d.default,{}),(0,s.jsx)(r.Ix,{})]})}},886:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ProjectList}});var s=n(85893),a=n(67294),i=n(11163),c=n(54887),l=n(19982),r=n(28486),d=n(51860),o=n(60646),u=n(56597),h=n(18754),x=n(25632),j=n(73906),p=n(26789),f=n(41652),m=n(50121),g=n(44650),v=n(15379),y=n(55678);n(27967);var N=n(94803),b=n.n(N),w=n(754),C=n(70314);function ProjectList(){let e=(0,i.useRouter)(),t="projects",[n,N]=(0,a.useState)(!0),[_,S]=(0,a.useState)(!1),[D,k]=(0,a.useState)([]),[Z,q]=(0,a.useState)("0");(0,a.useEffect)(()=>{let t={deleted:"/admin/[contentId]/deleted"==e.pathname?"1":"0"},n="".concat("/api/admin/project_admin/project_total_list","?").concat(c.Z.stringify(t));fetch(n).then(e=>e.json()).then(e=>{q(e.length),console.log(e.length)})},[]),(0,a.useEffect)(()=>{N(!0);let t={deleted:"/admin/project/deleted"==e.asPath?"1":"0",page:null!=e.query.pa?e.query.pa:"1",limit:"10"},n="".concat("/api/admin/project_admin/projectlist","?").concat(c.Z.stringify(t));fetch(n).then(e=>e.json()).then(e=>{k(e),console.log("project"),N(!1)})},[e.asPath,_]);let handleSwitch=async e=>{let n={id:e.id,active:"1"==e.active?"0":"1"},{data:s,error:a}=await g.O.from(t).update(n).eq("id",String(n.id));a?(console.log("Error:",a.message),(0,v._N)("Sửa tin thất bại")):(console.log(s),(0,v.x9)("Sửa tin th\xe0nh c\xf4ng"))},handleDeleted=e=>{let n={id:e.id,deleted:"1"};fetch("/api/admin/updateDataDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filterParams:{tableBase:t,obj:n}})}).then(e=>e.json()).then(e=>{e?(S(!_),(0,v.x9)("X\xf3a tin th\xe0nh c\xf4ng")):(0,v._N)("X\xf3a tin thất bại")})},handleRestore=async e=>{let n={id:e.id,deleted:"0"};fetch("/api/admin/updateDataDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filterParams:{tableBase:t,obj:n}})}).then(e=>e.json()).then(e=>{e?(S(!_),(0,v.x9)("Kh\xf4i phục tin th\xe0nh c\xf4ng")):(0,v._N)("Kh\xf4i phục tin thất bại")})};return n?(0,s.jsx)(C.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.b,{"aria-label":"Example static collection table",children:[(0,s.jsxs)(h.J,{children:[(0,s.jsx)(x.j,{children:"NAME"}),(0,s.jsx)(x.j,{children:"Ng\xe0y đăng"}),(0,s.jsx)(x.j,{children:"Ẩn/Hiện"}),(0,s.jsx)(x.j,{children:"ACTION"})]}),(0,s.jsx)(j.y,{children:D.map((t,n)=>(0,s.jsxs)(p.g,{className:"",children:[(0,s.jsx)(f.X,{children:(0,s.jsx)("span",{className:"line-clamp-1",children:t.name_vn})}),(0,s.jsx)(f.X,{children:(0,s.jsx)(b(),{format:"DD/MM/YYYY",children:t.date_added})}),(0,s.jsx)(f.X,{children:(0,s.jsx)(m.i,{defaultSelected:"1"==t.active,size:"sm",onChange:e=>handleSwitch(t)})}),(0,s.jsx)(f.X,{children:(0,s.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>window.open("/du-an/".concat(t.keyword,"/").concat(t.id),"_blank"),children:(0,s.jsx)(l.Z,{size:23})}),(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>e.push("/admin/project/edit/".concat(t.id),void 0,{shallow:!0}),children:(0,s.jsx)(r.Z,{size:23})}),"/admin/[contentId]/deleted"==e.pathname?(0,s.jsx)("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleRestore(t),children:(0,s.jsx)(d.Z,{size:23})}):(0,s.jsx)("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:e=>handleDeleted(t),children:(0,s.jsx)(o.Z,{size:23})})]})})]},n))})]}),(0,s.jsx)(w.default,{totalData:Z}),(0,s.jsx)(y.Ix,{})]})}},66767:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var s=n(85893);n(67294);var a=n(84053),i=n(44086),c=n(21056),l=n(11163),r=n(886),d=n(88799);function Home(){let e=(0,l.useRouter)(),t=(0,a.useSession)(),n="project"===e.query.contentId,o="project/edit"===e.query.contentId;return e.query.contentId,(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)("div",{className:"container mx-auto md:w-[1170px] p-2 md:p-6 ",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-8",children:[(0,s.jsx)("div",{className:"col-span-4",children:(0,s.jsx)(i.default,{})}),(0,s.jsxs)("div",{className:"col-span-8",children:[n&&(0,s.jsx)(r.default,{}),o&&(0,s.jsx)(d.default,{})]})]})}):(0,s.jsx)(c.default,{})})}}},function(e){e.O(0,[885,146,971,864,459,961,758,258,469,24,982,934,606,515,536,700,5,774,888,179],function(){return e(e.s=64830)}),_N_E=e.O()}]);